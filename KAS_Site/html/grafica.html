<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="/css/style.css">
	<link rel="icon" type="image/png" href="Kas_logo_icon.png">
	<script src="http://code.jquery.com/jquery-3.6.0.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
	<title>grafica_kas</title>
</head>

<body>
	<section>
		<ul>
			<li id="paginaInicial"><a href="index.html"><img src="KAS_logo_1.png" alt="logo" width="50px" height="50%"></a></li>
			<li id="statsdeStats"><a href="estatistica.html">Mapas</a></li>
			<li id="statsDeStocks"><a href="stocks.html">Stocks</a></li>
			<li id="statsdeGraphs"><a href="grafica.html">Gráficos</a></li>
			<li class="dropdown">
				<a id="login" href="perfil.html" class="dropbtn">Perfil</a>
				<div class="dropdown-content">
					<a id="exit">Logout</a>
				</div>
			</li>
			<li id="sobrenos"><a href="about.html">Sobre nós</a></li>
		</ul>
	</section>
	<center>
		<h1>Gráficos</h1>
	</center>
	<br>

	<input type="number" id="funko" placeholder="Insira o numero de vendas de funko">
	<input type="number" id="gpu" placeholder="Insira o numero de vendas de GPU">
	<input type="number" id="led" placeholder="Insira o numero de vendas de LED">
	<input type="number" id="teclado" placeholder="Insira o numero de vendas de teclado">
	<input type="number" id="rato" placeholder="Insira o numero de vendas de rato">

	<button id="btnatualizarVendas">Atualizar</button>
	<button id="export">Exportar</button>

	<br>
	<br>
	<center>
		<div class="graficos">
			<canvas id="myChart" style="width:100%;max-width:600px"></canvas>
		</div>
		<br>
		<div class="graficos">
			<canvas id="myChart2" style="width:100%;max-width:600px"></canvas>
		</div>
		<br>
		<div class="graficos">
			<canvas id="myChart3" style="width:100%;max-width:600px"></canvas>
		</div>
	</center>

</body>
<script src="/javascript/scripts_allpages.js"></script>
<script src="/javascript/cookies.js"></script>
<script>
	$(document).ready(function () {
		let funko = 0;
		let gpu = 0;
		let led = 0;
		let teclado = 0;
		let rato = 0;



		$('#btnatualizarVendas').click(function () {
			funko = $('#funko').val();
			gpu = $('#gpu').val();
			led = $('#led').val();
			teclado = $('#teclado').val();
			rato = $('#rato').val();

			const xValues = ["Funko", "GPU", "Led", "Teclado", "Rato"];
			const yValues = [funko, gpu, led, teclado, rato];
			const barColors = ["red", "green", "blue", "orange", "brown"];

			new Chart("myChart", {
				type: "bar",
				data: {
					labels: xValues,
					datasets: [{
						backgroundColor: barColors,
						data: yValues
					}]
				},
				options: {
					legend: { display: false },
					title: {
						display: true,
						text: "Vendas de artigos eletrônicos mensais"
					}
				}
			});

			new Chart("myChart2", {
				type: "pie",
				data: {
					labels: xValues,
					datasets: [{
						backgroundColor: barColors,
						data: yValues
					}]
				},
				options: {
					title: {
						display: true,
						text: "Vendas de artigos eletrônicos mensais"
					}
				}
			});

			new Chart("myChart3", {
				type: "horizontalBar",
				data: {
					labels: xValues,
					datasets: [{
						backgroundColor: barColors,
						data: yValues
					}]
				},
				options: {
					legend: { display: false },
					title: {
						display: true,
						text: "Vendas de artigos eletrônicos mensais"
					}
				}
			});
		});

		$('#export').click(function () {
			const xValues = ["Funko", "GPU", "Led", "Teclado", "Rato"];
			const yValues = [funko, gpu, led, teclado, rato];

			let data = [["Produto", "Vendas"]];
			for (let i = 0; i < xValues.length; i++) {
				data.push([xValues[i], yValues[i]]);
			}

			let ws = XLSX.utils.aoa_to_sheet(data);
			let wb = XLSX.utils.book_new();
			XLSX.utils.book_append_sheet(wb, ws, "Vendas");

			XLSX.writeFile(wb, "vendas.xlsx");
		});

		const xValues = ["Funko", "GPU", "Led", "Teclado", "Rato"];
		const yValues = [0, 0, 0, 0, 0];
		const barColors = ["red", "green", "blue", "orange", "brown"];

		new Chart("myChart", {
			type: "bar",
			data: {
				labels: xValues,
				datasets: [{
					backgroundColor: barColors,
					data: yValues
				}]
			},
			options: {
				legend: { display: false },
				title: {
					display: true,
					text: "Vendas de artigos eletrônicos mensais"
				}
			}
		});

		new Chart("myChart2", {
			type: "pie",
			data: {
				labels: xValues,
				datasets: [{
					backgroundColor: barColors,
					data: yValues
				}]
			},
			options: {
				title: {
					display: true,
					text: "Vendas de artigos eletrônicos mensais"
				}
			}
		});

		new Chart("myChart3", {
			type: "horizontalBar",
			data: {
				labels: xValues,
				datasets: [{
					backgroundColor: barColors,
					data: yValues
				}]
			},
			options: {
				legend: { display: false },
				title: {
					display: true,
					text: "Vendas de artigos eletrônicos mensais"
				}
			}
		});
	});
</script>

</html>
